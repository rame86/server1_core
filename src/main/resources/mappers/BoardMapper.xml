<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.board.mapper.BoardMapper">

    <select id="findAll" resultType="com.example.board.dto.BoardDTO">
        SELECT 
            board_id AS boardId,
            category,
            title,
            content,
            member_id AS memberId,
            view_count AS viewCount,
            like_count AS likeCount,
            comment_count AS commentCount,
            is_artist_post AS isArtistPost,
            created_at AS createdAt
        FROM board.board
        <where>
            <if test="category != null and category != '' and category != '전체' and category != 'all'">
                AND category = #{category}
            </if>
        </where>
        ORDER BY created_at DESC
    </select>

    <insert id="insert">
        INSERT INTO board.board (category, title, content, member_id, is_artist_post)
        VALUES (#{category}, #{title}, #{content}, #{memberId}, #{isArtistPost})
    </insert>

    <select id="findById" resultType="com.example.board.dto.BoardDTO">
        SELECT * FROM board.board WHERE board_id = #{id}
    </select>

</mapper>